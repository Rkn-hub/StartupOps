<!DOCTYPE html>
<html class="dark overflow-x-hidden" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>StartupOps Assistant</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <!-- Standardized Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
        }
        .gradient-text {
            background: linear-gradient(90deg, #64FFDA, #64FFDA);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        
        /* Original Chatbot Styles */
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
        
        /* Enhanced Background */
        .gradient-bg {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0a 100%);
            position: relative;
            overflow: hidden;
        }
        
        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(0, 240, 255, 0.1) 0%, transparent 50%),
                       radial-gradient(circle at 80% 20%, rgba(100, 255, 218, 0.08) 0%, transparent 50%),
                       radial-gradient(circle at 40% 40%, rgba(0, 240, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }
        
        /* Enhanced Glass Effect */
        .glassmorphism {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .glow-border {
            box-shadow: 0 0 30px rgba(100, 255, 218, 0.2), 0 0 60px rgba(100, 255, 218, 0.1);
        }
        
        /* Animated orbs */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            animation: float 6s ease-in-out infinite;
            pointer-events: none;
        }
        
        .orb-1 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(0, 240, 255, 0.15) 0%, transparent 70%);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .orb-2 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(100, 255, 218, 0.1) 0%, transparent 70%);
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }
        
        /* Message animations */
        .message-enter {
            animation: messageSlideIn 0.3s ease-out;
        }
        
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(100, 255, 218, 0.6);
            animation: typingBounce 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0s; }
        
        @keyframes typingBounce {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Enhanced input styling */
        .enhanced-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .enhanced-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(100, 255, 218, 0.5);
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }
        
        /* Suggestion chips enhancement */
        .suggestion-chip {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .suggestion-chip:hover {
            background: rgba(100, 255, 218, 0.2);
            border-color: rgba(100, 255, 218, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
        }
    </style>
    <!-- Supabase Integration -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script>
    
    <!-- Enhanced Smart Chatbot -->
    <script src="js/smart-chatbot.js"></script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#212121",
                        "background-dark": "#212121",
                        "accent": "#64FFDA",
                        "text-primary": "#CCD6F6",
                        "text-secondary": "#8892B0",
                        "bot-bubble": "#112240",
                        "user-bubble": "#136aec",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "heading": ["Poppins", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem", 
                        "lg": "1rem", 
                        "xl": "1.5rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
</head>
<body class="font-display gradient-bg min-h-screen overflow-x-hidden">
    <!-- Standardized Navigation -->
    <div class="relative z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <header class="flex items-center justify-between py-6">
                <!-- Logo Section -->
                <div class="flex items-center gap-4 text-white">
                    <div class="size-6 text-accent">
                        <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 class="text-white text-xl font-bold font-heading">StartupOps</h2>
                </div>
                
                <!-- Navigation Links -->
                <nav class="hidden md:flex items-center gap-8 text-sm">
                    <a class="text-gray-300 hover:text-white transition-colors" href="index.html">Home</a>
                    <a class="text-gray-300 hover:text-white transition-colors" href="services.html">Services</a>
                    <a class="text-gray-300 hover:text-white transition-colors" href="portfolio.html">Portfolio</a>
                    <a class="text-gray-300 hover:text-white transition-colors" href="about.html">About</a>
                    <a class="text-gray-300 hover:text-white transition-colors" href="how-it-works.html">How It Works</a>
                    <a class="text-accent" href="chatbot.html">Assistant</a>
                </nav>
                
                <!-- CTA Button -->
                <button onclick="window.location.href='contact.html'" class="hidden md:flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-primary/80 border border-accent/30 text-white text-sm font-semibold leading-normal hover:bg-primary transition-all hover:shadow-lg hover:shadow-accent/20">
                    <span class="truncate">Contact Team</span>
                </button>
            </header>
        </div>
    </div>

    <div class="relative flex h-screen w-full flex-col items-center justify-center p-4">
        <!-- Animated Background Orbs -->
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <!-- Enhanced Chatbot Modal -->
        <div class="glassmorphism glow-border flex flex-col w-full max-w-lg h-[90vh] max-h-[750px] rounded-2xl overflow-hidden relative z-10 shadow-2xl">
            <!-- Enhanced Header -->
            <div class="flex justify-between items-center gap-2 p-6 border-b border-white/10 shrink-0 bg-white/5">
                <div class="flex items-center gap-3">
                    <div class="flex items-center justify-center bg-accent/20 rounded-full w-10 h-10 border border-accent/30">
                        <span class="material-symbols-outlined text-accent text-xl">smart_toy</span>
                    </div>
                    <div>
                        <h1 class="text-text-primary text-lg font-bold leading-tight">StartupOps Assistant</h1>
                        <p class="text-text-secondary text-sm">Online â€¢ Ready to help</p>
                    </div>
                </div>
                <button onclick="window.location.href='index.html'" class="p-2 text-text-secondary hover:text-accent transition-all hover:bg-white/10 rounded-lg">
                    <span class="material-symbols-outlined text-xl">close</span>
                </button>
            </div>

            <!-- Enhanced Chat History -->
            <div id="chatHistory" class="flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth">
                <!-- Enhanced Bot Welcome Message -->
                <div class="flex items-end gap-3 message-enter">
                    <div class="flex items-center justify-center bg-accent/20 rounded-full w-10 h-10 shrink-0 border border-accent/30">
                        <span class="material-symbols-outlined text-accent text-xl">smart_toy</span>
                    </div>
                    <div class="flex flex-1 flex-col gap-2 items-start">
                        <p class="text-text-secondary text-xs font-medium">StartupOps Assistant</p>
                        <div class="max-w-[400px] rounded-2xl rounded-bl-md px-5 py-4 bg-white/10 backdrop-blur-sm border border-white/10 text-text-primary">
                            <p class="text-base font-normal leading-relaxed">
                                Welcome to StartupOps! ðŸš€ How can I help you build the future?
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Input Area -->
            <div class="p-6 border-t border-white/10 space-y-4 shrink-0 bg-white/5">
                <!-- Enhanced Suggestion Chips -->
                <div class="flex gap-3 overflow-x-auto pb-2 -mx-6 px-6">
                    <button onclick="sendSuggestion('How does it work?')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">How does it work?</button>
                    <button onclick="sendSuggestion('Our Portfolio')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">Our Portfolio</button>
                    <button onclick="sendSuggestion('Equity Calculator')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">Equity Calculator</button>
                    <button onclick="sendSuggestion('Pricing Options')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">Pricing Options</button>
                    <button onclick="sendSuggestion('Contact Team')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">Contact Team</button>
                    <button onclick="sendSuggestion('Student Discounts')" class="suggestion-chip shrink-0 text-sm font-medium px-4 py-2 rounded-full text-accent">Student Discounts</button>
                </div>
                
                <!-- Enhanced Text Input -->
                <div class="relative flex items-center">
                    <input id="messageInput" class="enhanced-input w-full rounded-xl pl-5 pr-14 py-4 text-text-primary placeholder:text-text-secondary/60 focus:outline-none" placeholder="Type your message here..." type="text" onkeypress="handleKeyPress(event)"/>
                    <button onclick="sendMessage()" class="absolute right-3 p-2 rounded-lg text-accent hover:bg-accent/20 transition-all hover:scale-110">
                        <span class="material-symbols-outlined">send</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Smart Chatbot
        let smartBot;
        const chatHistory = document.getElementById('chatHistory');
        const messageInput = document.getElementById('messageInput');

        // Initialize chatbot when page loads
        window.addEventListener('load', () => {
            smartBot = new SmartChatbot();
            messageInput.focus();
            console.log('Smart Chatbot initialized with session:', smartBot.sessionId);
        });

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex items-end gap-3 message-enter ${isUser ? 'justify-end' : ''}`;
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="flex flex-1 flex-col gap-2 items-end">
                        <p class="text-text-secondary text-xs font-medium text-right">You</p>
                        <div class="max-w-[400px] rounded-2xl rounded-br-md px-5 py-4 bg-gradient-to-r from-accent to-accent/80 text-white shadow-lg">
                            <p class="text-base font-normal leading-relaxed">${message}</p>
                        </div>
                    </div>
                    <div class="flex items-center justify-center bg-accent/20 rounded-full w-10 h-10 shrink-0 border border-accent/30">
                        <span class="material-symbols-outlined text-accent text-xl">person</span>
                    </div>
                `;
            } else {
                // Convert markdown-style formatting to HTML
                const formattedMessage = formatBotMessage(message);
                messageDiv.innerHTML = `
                    <div class="flex items-center justify-center bg-accent/20 rounded-full w-10 h-10 shrink-0 border border-accent/30">
                        <span class="material-symbols-outlined text-accent text-xl">smart_toy</span>
                    </div>
                    <div class="flex flex-1 flex-col gap-2 items-start">
                        <p class="text-text-secondary text-xs font-medium">StartupOps Assistant</p>
                        <div class="max-w-[400px] rounded-2xl rounded-bl-md px-5 py-4 bg-white/10 backdrop-blur-sm border border-white/10 text-text-primary">
                            <div class="text-base font-normal leading-relaxed">${formattedMessage}</div>
                        </div>
                    </div>
                `;
            }
            
            chatHistory.appendChild(messageDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        function formatBotMessage(message) {
            return message
                // Bold text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                // Bullet points
                .replace(/^â€¢ (.*$)/gim, '<div class="flex items-start gap-2 my-1"><span class="text-accent">â€¢</span><span>$1</span></div>')
                // Numbered lists
                .replace(/^(\d+)\. (.*$)/gim, '<div class="flex items-start gap-2 my-1"><span class="text-accent font-bold">$1.</span><span>$2</span></div>')
                // Links
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="text-accent hover:underline" target="_blank">$1</a>')
                // Line breaks
                .replace(/\n/g, '<br>');
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'flex items-end gap-3 message-enter';
            typingDiv.innerHTML = `
                <div class="flex items-center justify-center bg-accent/20 rounded-full w-10 h-10 shrink-0 border border-accent/30">
                    <span class="material-symbols-outlined text-accent text-xl">smart_toy</span>
                </div>
                <div class="flex flex-1 flex-col gap-2 items-start">
                    <p class="text-text-secondary text-xs font-medium">StartupOps Assistant</p>
                    <div class="rounded-2xl rounded-bl-md px-5 py-4 bg-white/10 backdrop-blur-sm border border-white/10">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            chatHistory.appendChild(typingDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || !smartBot) return;
            
            // Add user message
            addMessage(message, true);
            messageInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Get smart response
                const response = await smartBot.processMessage(message);
                
                // Simulate realistic typing delay
                setTimeout(() => {
                    removeTypingIndicator();
                    addMessage(response, false);
                    
                    // Check if this is a qualified lead
                    if (smartBot.isQualifiedLead()) {
                        setTimeout(() => {
                            addMessage("ðŸŽ‰ You seem like a great fit for StartupOps! Would you like me to connect you with our team for a free consultation?", false);
                        }, 2000);
                    }
                }, 1000 + Math.random() * 1500);
                
            } catch (error) {
                console.error('Error processing message:', error);
                removeTypingIndicator();
                addMessage("I apologize, but I'm having trouble processing your message right now. Please try again or contact us directly at startup.ops.co@gmail.com", false);
            }
        }

        function sendSuggestion(suggestion) {
            messageInput.value = suggestion;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Track when user opens equity calculator
        function openEquityCalculator() {
            if (smartBot) {
                smartBot.trackConversion('equity_calculator');
            }
            window.open('equity-calculator.html', '_blank');
        }

        // Track when user opens contact form
        function openContactForm() {
            if (smartBot) {
                smartBot.trackConversion('contact_form');
            }
            window.open('contact.html', '_blank');
        }

        // Update suggestion chips to include more options
        function updateSuggestionChips() {
            const suggestions = [
                'How does it work?',
                'Our Portfolio', 
                'Equity Calculator',
                'Pricing Options',
                'Contact Team',
                'Student Discounts'
            ];
            
            // You can dynamically update suggestions based on conversation context
            if (smartBot && smartBot.intentsDiscussed.has('services_general')) {
                suggestions.push('Technology Services', 'Marketing Services');
            }
        }

        // Enhanced suggestion chips with tracking
        document.addEventListener('DOMContentLoaded', function() {
            // Add click tracking to existing suggestion chips
            const suggestionChips = document.querySelectorAll('.suggestion-chip');
            suggestionChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    const suggestion = this.textContent.trim();
                    sendSuggestion(suggestion);
                });
            });
        });
    </script>
</body>
</html>